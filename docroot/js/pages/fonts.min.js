(()=>{var It=Object.defineProperty;var Yt=(i,t,e)=>t in i?It(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var C=(i,t,e)=>Yt(i,typeof t!="symbol"?t+"":t,e);var jt=i=>Object.prototype.toString.call(i)==="[object Object]";var mt=(i,t)=>{let e=document.createElement(i);if(t&&typeof t=="object")for(let s in t)s==="html"?e.innerHTML=t[s]:e.setAttribute(s,t[s]);return e},lt=i=>["#text","#comment"].includes(i.nodeName)?i.data:i.childNodes?i.childNodes.map((t=>lt(t))).join(""):"",nt=i=>{if(i==null)return"";if(i.hasOwnProperty("text")||i.hasOwnProperty("data")){let t=i;return t.text??nt(t.data)}return i.hasOwnProperty("nodeName")?lt(i):String(i)};var Vt=function(i,t){let e=0,s=0;for(;e<i+1;)t[s].hidden||(e+=1),s+=1;return s-1},$t=function(i){let t={};if(i)for(let e of i)t[e.name]=e.value;return t},tt=i=>i?i.trim().split(" ").map((t=>`.${t}`)).join(""):null,gt=(i,t)=>!t?.split(" ").some((s=>!i.classList.contains(s))),J=(i,t)=>i?t?`${i} ${t}`:i:t||"",Ft=function(i,t=300){let e;return(...s)=>{clearTimeout(e),e=window.setTimeout((()=>i()),t)}},_t=function(){return _t=Object.assign||function(i){for(var t,e=arguments,s=1,n=arguments.length;s<n;s++)for(var o in t=e[s])Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o]);return i},_t.apply(this,arguments)};function ct(i,t,e){if(e||arguments.length===2)for(var s,n=0,o=t.length;n<o;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return i.concat(s||Array.prototype.slice.call(t))}var P=(function(){function i(t){t===void 0&&(t={});var e=this;Object.entries(t).forEach((function(s){var n=s[0],o=s[1];return e[n]=o}))}return i.prototype.toString=function(){return JSON.stringify(this)},i.prototype.setValue=function(t,e){return this[t]=e,this},i})();function I(i){for(var t=arguments,e=[],s=1;s<arguments.length;s++)e[s-1]=t[s];return i!=null&&e.some((function(n){var o,a;return typeof((a=(o=i?.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||a===void 0?void 0:a[n])=="function"&&i instanceof i.ownerDocument.defaultView[n]}))}function yt(i,t,e){var s;return i.nodeName==="#text"?s=e.document.createTextNode(i.data):i.nodeName==="#comment"?s=e.document.createComment(i.data):(t?(s=e.document.createElementNS("http://www.w3.org/2000/svg",i.nodeName),i.nodeName==="foreignObject"&&(t=!1)):i.nodeName.toLowerCase()==="svg"?(s=e.document.createElementNS("http://www.w3.org/2000/svg","svg"),t=!0):s=e.document.createElement(i.nodeName),i.attributes&&Object.entries(i.attributes).forEach((function(n){var o=n[0],a=n[1];return s.setAttribute(o,a)})),i.childNodes&&i.childNodes.forEach((function(n){return s.appendChild(yt(n,t,e))})),e.valueDiffing&&(i.value&&I(s,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(s.value=i.value),i.checked&&I(s,"HTMLInputElement")&&(s.checked=i.checked),i.selected&&I(s,"HTMLOptionElement")&&(s.selected=i.selected))),s}var bt=function(i,t){for(t=t.slice();t.length>0;){var e=t.splice(0,1)[0];i=i.childNodes[e]}return i};function Q(i,t,e){var s,n,o,a=t[e._const.action],r=t[e._const.route];[e._const.addElement,e._const.addTextElement].includes(a)||(s=bt(i,r));var l={diff:t,node:s};if(e.preDiffApply(l))return!0;switch(a){case e._const.addAttribute:if(!s||!I(s,"Element"))return!1;s.setAttribute(t[e._const.name],t[e._const.value]);break;case e._const.modifyAttribute:if(!s||!I(s,"Element"))return!1;s.setAttribute(t[e._const.name],t[e._const.newValue]),I(s,"HTMLInputElement")&&t[e._const.name]==="value"&&(s.value=t[e._const.newValue]);break;case e._const.removeAttribute:if(!s||!I(s,"Element"))return!1;s.removeAttribute(t[e._const.name]);break;case e._const.modifyTextElement:if(!s||!I(s,"Text"))return!1;e.textDiff(s,s.data,t[e._const.oldValue],t[e._const.newValue]),I(s.parentNode,"HTMLTextAreaElement")&&(s.parentNode.value=t[e._const.newValue]);break;case e._const.modifyValue:if(!s||s.value===void 0)return!1;s.value=t[e._const.newValue];break;case e._const.modifyComment:if(!s||!I(s,"Comment"))return!1;e.textDiff(s,s.data,t[e._const.oldValue],t[e._const.newValue]);break;case e._const.modifyChecked:if(!s||s.checked===void 0)return!1;s.checked=t[e._const.newValue];break;case e._const.modifySelected:if(!s||s.selected===void 0)return!1;s.selected=t[e._const.newValue];break;case e._const.replaceElement:var d=t[e._const.newValue].nodeName.toLowerCase()==="svg"||s.parentNode.namespaceURI==="http://www.w3.org/2000/svg";s.parentNode.replaceChild(yt(t[e._const.newValue],d,e),s);break;case e._const.relocateGroup:ct([],new Array(t[e._const.groupLength]),!0).map((function(){return s.removeChild(s.childNodes[t[e._const.from]])})).forEach((function(h,p){p===0&&(o=s.childNodes[t[e._const.to]]),s.insertBefore(h,o||null)}));break;case e._const.removeElement:s.parentNode.removeChild(s);break;case e._const.addElement:var u=(f=r.slice()).splice(f.length-1,1)[0];if(!I(s=bt(i,f),"Element"))return!1;s.insertBefore(yt(t[e._const.element],s.namespaceURI==="http://www.w3.org/2000/svg",e),s.childNodes[u]||null);break;case e._const.removeTextElement:if(!s||s.nodeType!==3)return!1;var m=s.parentNode;m.removeChild(s),I(m,"HTMLTextAreaElement")&&(m.value="");break;case e._const.addTextElement:var f;if(u=(f=r.slice()).splice(f.length-1,1)[0],n=e.document.createTextNode(t[e._const.value]),!(s=bt(i,f)).childNodes)return!1;s.insertBefore(n,s.childNodes[u]||null),I(s.parentNode,"HTMLTextAreaElement")&&(s.parentNode.value=t[e._const.value]);break;default:console.log("unknown action")}return e.postDiffApply({diff:l.diff,node:l.node,newNode:n}),!0}function vt(i,t,e){var s=i[t];i[t]=i[e],i[e]=s}function qt(i,t,e){(t=t.slice()).reverse(),t.forEach((function(s){(function(n,o,a){switch(o[a._const.action]){case a._const.addAttribute:o[a._const.action]=a._const.removeAttribute,Q(n,o,a);break;case a._const.modifyAttribute:vt(o,a._const.oldValue,a._const.newValue),Q(n,o,a);break;case a._const.removeAttribute:o[a._const.action]=a._const.addAttribute,Q(n,o,a);break;case a._const.modifyTextElement:case a._const.modifyValue:case a._const.modifyComment:case a._const.modifyChecked:case a._const.modifySelected:case a._const.replaceElement:vt(o,a._const.oldValue,a._const.newValue),Q(n,o,a);break;case a._const.relocateGroup:vt(o,a._const.from,a._const.to),Q(n,o,a);break;case a._const.removeElement:o[a._const.action]=a._const.addElement,Q(n,o,a);break;case a._const.addElement:o[a._const.action]=a._const.removeElement,Q(n,o,a);break;case a._const.removeTextElement:o[a._const.action]=a._const.addTextElement,Q(n,o,a);break;case a._const.addTextElement:o[a._const.action]=a._const.removeTextElement,Q(n,o,a);break;default:console.log("unknown action")}})(i,s,e)}))}var Nt=function(i){var t=[];return t.push(i.nodeName),i.nodeName!=="#text"&&i.nodeName!=="#comment"&&i.attributes&&(i.attributes.class&&t.push("".concat(i.nodeName,".").concat(i.attributes.class.replace(/ /g,"."))),i.attributes.id&&t.push("".concat(i.nodeName,"#").concat(i.attributes.id))),t},Ct=function(i){var t={},e={};return i.forEach((function(s){Nt(s).forEach((function(n){var o=n in t;o||n in e?o&&(delete t[n],e[n]=!0):t[n]=!0}))})),t},At=function(i,t){var e=Ct(i),s=Ct(t),n={};return Object.keys(e).forEach((function(o){s[o]&&(n[o]=!0)})),n},Pt=function(i){return delete i.outerDone,delete i.innerDone,delete i.valueDone,!i.childNodes||i.childNodes.every(Pt)},j=function(i){if(Object.prototype.hasOwnProperty.call(i,"data"))return{nodeName:i.nodeName==="#text"?"#text":"#comment",data:i.data};var t={nodeName:i.nodeName};return Object.prototype.hasOwnProperty.call(i,"attributes")&&(t.attributes=_t({},i.attributes)),Object.prototype.hasOwnProperty.call(i,"checked")&&(t.checked=i.checked),Object.prototype.hasOwnProperty.call(i,"value")&&(t.value=i.value),Object.prototype.hasOwnProperty.call(i,"selected")&&(t.selected=i.selected),Object.prototype.hasOwnProperty.call(i,"childNodes")&&(t.childNodes=i.childNodes.map((function(e){return j(e)}))),t},Dt=function(i,t){if(!["nodeName","value","checked","selected","data"].every((function(n){return i[n]===t[n]})))return!1;if(Object.prototype.hasOwnProperty.call(i,"data"))return!0;if(!!i.attributes!=!!t.attributes||!!i.childNodes!=!!t.childNodes)return!1;if(i.attributes){var e=Object.keys(i.attributes),s=Object.keys(t.attributes);if(e.length!==s.length||!e.every((function(n){return i.attributes[n]===t.attributes[n]})))return!1}return!(i.childNodes&&(i.childNodes.length!==t.childNodes.length||!i.childNodes.every((function(n,o){return Dt(n,t.childNodes[o])}))))},Et=function(i,t,e,s,n){if(n===void 0&&(n=!1),!i||!t||i.nodeName!==t.nodeName)return!1;if(["#text","#comment"].includes(i.nodeName))return!!n||i.data===t.data;if(i.nodeName in e)return!0;if(i.attributes&&t.attributes){if(i.attributes.id){if(i.attributes.id!==t.attributes.id)return!1;if("".concat(i.nodeName,"#").concat(i.attributes.id)in e)return!0}if(i.attributes.class&&i.attributes.class===t.attributes.class&&"".concat(i.nodeName,".").concat(i.attributes.class.replace(/ /g,"."))in e)return!0}if(s)return!0;var o=i.childNodes?i.childNodes.slice().reverse():[],a=t.childNodes?t.childNodes.slice().reverse():[];if(o.length!==a.length)return!1;if(n)return o.every((function(l,d){return l.nodeName===a[d].nodeName}));var r=At(o,a);return o.every((function(l,d){return Et(l,a[d],r,!0,!0)}))},ht=function(i,t){return ct([],new Array(i),!0).map((function(){return t}))},Bt=function(i,t){for(var e=i.childNodes?i.childNodes:[],s=t.childNodes?t.childNodes:[],n=ht(e.length,!1),o=ht(s.length,!1),a=[],r=function(){return arguments[1]},l=!1,d=function(){var u=(function(m,f,h,p){var N=0,D=[],V=m.length,c=f.length,y=ct([],new Array(V+1),!0).map((function(){return[]})),T=At(m,f),S=V===c;S&&m.some((function(k,R){var w=Nt(k),b=Nt(f[R]);return w.length!==b.length?(S=!1,!0):(w.some((function(g,_){if(g!==b[_])return S=!1,!0})),!S||void 0)}));for(var $=0;$<V;$++)for(var A=m[$],O=0;O<c;O++){var M=f[O];h[$]||p[O]||!Et(A,M,T,S)?y[$+1][O+1]=0:(y[$+1][O+1]=y[$][O]?y[$][O]+1:1,y[$+1][O+1]>=N&&(N=y[$+1][O+1],D=[$+1,O+1]))}return N!==0&&{oldValue:D[0]-N,newValue:D[1]-N,length:N}})(e,s,n,o);u?(a.push(u),ct([],new Array(u.length),!0).map(r).forEach((function(m){return(function(f,h,p,N){f[p.oldValue+N]=!0,h[p.newValue+N]=!0})(n,o,u,m)}))):l=!0};!l;)d();return i.subsets=a,i.subsetsAge=100,a},zt=(function(){function i(){this.list=[]}return i.prototype.add=function(t){var e;(e=this.list).push.apply(e,t)},i.prototype.forEach=function(t){this.list.forEach((function(e){return t(e)}))},i})();function wt(i,t){var e,s,n=i;for(t=t.slice();t.length>0;)s=t.splice(0,1)[0],e=n,n=n.childNodes?n.childNodes[s]:void 0;return{node:n,parentNode:e,nodeIndex:s}}function Ut(i,t,e){return t.forEach((function(s){(function(n,o,a){var r,l,d,u;if(![a._const.addElement,a._const.addTextElement].includes(o[a._const.action])){var m=wt(n,o[a._const.route]);l=m.node,d=m.parentNode,u=m.nodeIndex}var f,h,p=[],N={diff:o,node:l};if(a.preVirtualDiffApply(N))return!0;switch(o[a._const.action]){case a._const.addAttribute:l.attributes||(l.attributes={}),l.attributes[o[a._const.name]]=o[a._const.value],o[a._const.name]==="checked"?l.checked=!0:o[a._const.name]==="selected"?l.selected=!0:l.nodeName==="INPUT"&&o[a._const.name]==="value"&&(l.value=o[a._const.value]);break;case a._const.modifyAttribute:l.attributes[o[a._const.name]]=o[a._const.newValue];break;case a._const.removeAttribute:delete l.attributes[o[a._const.name]],Object.keys(l.attributes).length===0&&delete l.attributes,o[a._const.name]==="checked"?l.checked=!1:o[a._const.name]==="selected"?delete l.selected:l.nodeName==="INPUT"&&o[a._const.name]==="value"&&delete l.value;break;case a._const.modifyTextElement:l.data=o[a._const.newValue],d.nodeName==="TEXTAREA"&&(d.value=o[a._const.newValue]);break;case a._const.modifyValue:l.value=o[a._const.newValue];break;case a._const.modifyComment:l.data=o[a._const.newValue];break;case a._const.modifyChecked:l.checked=o[a._const.newValue];break;case a._const.modifySelected:l.selected=o[a._const.newValue];break;case a._const.replaceElement:f=j(o[a._const.newValue]),d.childNodes[u]=f;break;case a._const.relocateGroup:l.childNodes.splice(o[a._const.from],o[a._const.groupLength]).reverse().forEach((function(c){return l.childNodes.splice(o[a._const.to],0,c)})),l.subsets&&l.subsets.forEach((function(c){if(o[a._const.from]<o[a._const.to]&&c.oldValue<=o[a._const.to]&&c.oldValue>o[a._const.from])c.oldValue-=o[a._const.groupLength],(y=c.oldValue+c.length-o[a._const.to])>0&&(p.push({oldValue:o[a._const.to]+o[a._const.groupLength],newValue:c.newValue+c.length-y,length:y}),c.length-=y);else if(o[a._const.from]>o[a._const.to]&&c.oldValue>o[a._const.to]&&c.oldValue<o[a._const.from]){var y;c.oldValue+=o[a._const.groupLength],(y=c.oldValue+c.length-o[a._const.to])>0&&(p.push({oldValue:o[a._const.to]+o[a._const.groupLength],newValue:c.newValue+c.length-y,length:y}),c.length-=y)}else c.oldValue===o[a._const.from]&&(c.oldValue=o[a._const.to])}));break;case a._const.removeElement:d.childNodes.splice(u,1),d.subsets&&d.subsets.forEach((function(c){c.oldValue>u?c.oldValue-=1:c.oldValue===u?c.delete=!0:c.oldValue<u&&c.oldValue+c.length>u&&(c.oldValue+c.length-1===u?c.length--:(p.push({newValue:c.newValue+u-c.oldValue,oldValue:u,length:c.length-u+c.oldValue-1}),c.length=u-c.oldValue))})),l=d;break;case a._const.addElement:var D=(h=o[a._const.route].slice()).splice(h.length-1,1)[0];l=(r=wt(n,h))===null||r===void 0?void 0:r.node,f=j(o[a._const.element]),l.childNodes||(l.childNodes=[]),D>=l.childNodes.length?l.childNodes.push(f):l.childNodes.splice(D,0,f),l.subsets&&l.subsets.forEach((function(c){if(c.oldValue>=D)c.oldValue+=1;else if(c.oldValue<D&&c.oldValue+c.length>D){var y=c.oldValue+c.length-D;p.push({newValue:c.newValue+c.length-y,oldValue:D+1,length:y}),c.length-=y}}));break;case a._const.removeTextElement:d.childNodes.splice(u,1),d.nodeName==="TEXTAREA"&&delete d.value,d.subsets&&d.subsets.forEach((function(c){c.oldValue>u?c.oldValue-=1:c.oldValue===u?c.delete=!0:c.oldValue<u&&c.oldValue+c.length>u&&(c.oldValue+c.length-1===u?c.length--:(p.push({newValue:c.newValue+u-c.oldValue,oldValue:u,length:c.length-u+c.oldValue-1}),c.length=u-c.oldValue))})),l=d;break;case a._const.addTextElement:var V=(h=o[a._const.route].slice()).splice(h.length-1,1)[0];f={nodeName:"#text",data:o[a._const.value]},(l=wt(n,h).node).childNodes||(l.childNodes=[]),V>=l.childNodes.length?l.childNodes.push(f):l.childNodes.splice(V,0,f),l.nodeName==="TEXTAREA"&&(l.value=o[a._const.newValue]),l.subsets&&l.subsets.forEach((function(c){if(c.oldValue>=V&&(c.oldValue+=1),c.oldValue<V&&c.oldValue+c.length>V){var y=c.oldValue+c.length-V;p.push({newValue:c.newValue+c.length-y,oldValue:V+1,length:y}),c.length-=y}}));break;default:console.log("unknown action")}l.subsets&&(l.subsets=l.subsets.filter((function(c){return!c.delete&&c.oldValue!==c.newValue})),p.length&&(l.subsets=l.subsets.concat(p))),a.postVirtualDiffApply({node:N.node,diff:N.diff,newNode:f})})(i,s,e)})),!0}function et(i,t){t===void 0&&(t={valueDiffing:!0});var e={nodeName:i.nodeName};return I(i,"Text","Comment")?e.data=i.data:(i.attributes&&i.attributes.length>0&&(e.attributes={},Array.prototype.slice.call(i.attributes).forEach((function(s){return e.attributes[s.name]=s.value}))),i.childNodes&&i.childNodes.length>0&&(e.childNodes=[],Array.prototype.slice.call(i.childNodes).forEach((function(s){return e.childNodes.push(et(s,t))}))),t.valueDiffing&&(I(i,"HTMLTextAreaElement")&&(e.value=i.value),I(i,"HTMLInputElement")&&["radio","checkbox"].includes(i.type.toLowerCase())&&i.checked!==void 0?e.checked=i.checked:I(i,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(e.value=i.value),I(i,"HTMLOptionElement")&&(e.selected=i.selected))),e}var Jt=/<\s*\/*[a-zA-Z:_][a-zA-Z0-9:_\-.]*\s*(?:"[^"]*"['"]*|'[^']*'['"]*|[^'"/>])*\/*\s*>|<!--(?:.|\n|\r)*?-->/g,Wt=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function St(i){return i.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var Qt={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Tt=function(i,t){var e={nodeName:"",attributes:{}},s=!1,n=i.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.nodeName=t||n[1]==="svg"?n[1]:n[1].toUpperCase(),(Qt[n[1]]||i.charAt(i.length-2)==="/")&&(s=!0),e.nodeName.startsWith("!--"))){var o=i.indexOf("-->");return{type:"comment",node:{nodeName:"#comment",data:o!==-1?i.slice(4,o):""},voidElement:s}}for(var a=new RegExp(Wt),r=null,l=!1;!l;)if((r=a.exec(i))===null)l=!0;else if(r[0].trim())if(r[1]){var d=r[1].trim(),u=[d,""];d.indexOf("=")>-1&&(u=d.split("=")),e.attributes[u[0]]=u[1],a.lastIndex--}else r[2]&&(e.attributes[r[2]]=r[3].trim().substring(1,r[3].length-1));return{type:"tag",node:e,voidElement:s}},st=function(i,t){t===void 0&&(t={valueDiffing:!0,caseSensitive:!1});var e,s=[],n=-1,o=[],a=!1;if(i.indexOf("<")!==0){var r=i.indexOf("<");s.push({nodeName:"#text",data:r===-1?i:i.substring(0,r)})}return i.replace(Jt,(function(l,d){var u=l.charAt(1)!=="/",m=l.startsWith("<!--"),f=d+l.length,h=i.charAt(f);if(m){var p=Tt(l,t.caseSensitive).node;if(n<0)return s.push(p),"";var N=o[n];return N&&p.nodeName&&(N.node.childNodes||(N.node.childNodes=[]),N.node.childNodes.push(p)),""}if(u){if((e=Tt(l,t.caseSensitive||a)).node.nodeName==="svg"&&(a=!0),n++,!e.voidElement&&h&&h!=="<"){e.node.childNodes||(e.node.childNodes=[]);var D=St(i.slice(f,i.indexOf("<",f)));e.node.childNodes.push({nodeName:"#text",data:D}),t.valueDiffing&&e.node.nodeName==="TEXTAREA"&&(e.node.value=D)}n===0&&e.node.nodeName&&s.push(e.node);var V=o[n-1];V&&e.node.nodeName&&(V.node.childNodes||(V.node.childNodes=[]),V.node.childNodes.push(e.node)),o[n]=e}if((!u||e.voidElement)&&(n>-1&&(e.voidElement||t.caseSensitive&&e.node.nodeName===l.slice(2,-1)||!t.caseSensitive&&e.node.nodeName.toUpperCase()===l.slice(2,-1).toUpperCase())&&--n>-1&&(e.node.nodeName==="svg"&&(a=!1),e=o[n]),h!=="<"&&h)){var c=n===-1?s:o[n].node.childNodes||[],y=i.indexOf("<",f);D=St(i.slice(f,y===-1?void 0:y)),c.push({nodeName:"#text",data:D})}return""})),s[0]},Xt=(function(){function i(t,e,s){this.options=s,this.t1=typeof Element<"u"&&I(t,"Element")?et(t,this.options):typeof t=="string"?st(t,this.options):JSON.parse(JSON.stringify(t)),this.t2=typeof Element<"u"&&I(e,"Element")?et(e,this.options):typeof e=="string"?st(e,this.options):JSON.parse(JSON.stringify(e)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig=typeof Element<"u"&&I(t,"Element")?et(t,this.options):typeof t=="string"?st(t,this.options):JSON.parse(JSON.stringify(t)),this.t2Orig=typeof Element<"u"&&I(e,"Element")?et(e,this.options):typeof e=="string"?st(e,this.options):JSON.parse(JSON.stringify(e))),this.tracker=new zt}return i.prototype.init=function(){return this.findDiffs(this.t1,this.t2)},i.prototype.findDiffs=function(t,e){var s;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw new Error("surpassed diffcap:".concat(JSON.stringify(this.t1Orig)," -> ").concat(JSON.stringify(this.t2Orig)));(s=this.findNextDiff(t,e,[])).length===0&&(Dt(t,e)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,Pt(t),s=this.findNextDiff(t,e,[])))),s.length>0&&(this.foundAll=!1,this.tracker.add(s),Ut(t,s,this.options))}while(s.length>0);return this.tracker.list},i.prototype.findNextDiff=function(t,e,s){var n,o;if(this.options.maxDepth&&s.length>this.options.maxDepth)return[];if(!t.outerDone){if(n=this.findOuterDiff(t,e,s),this.options.filterOuterDiff&&(o=this.options.filterOuterDiff(t,e,n))&&(n=o),n.length>0)return t.outerDone=!0,n;t.outerDone=!0}if(Object.prototype.hasOwnProperty.call(t,"data"))return[];if(!t.innerDone){if((n=this.findInnerDiff(t,e,s)).length>0)return n;t.innerDone=!0}if(this.options.valueDiffing&&!t.valueDone){if((n=this.findValueDiff(t,e,s)).length>0)return t.valueDone=!0,n;t.valueDone=!0}return[]},i.prototype.findOuterDiff=function(t,e,s){var n,o,a,r,l,d,u=[];if(t.nodeName!==e.nodeName){if(!s.length)throw new Error("Top level nodes have to be of the same kind.");return[new P().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,j(t)).setValue(this.options._const.newValue,j(e)).setValue(this.options._const.route,s)]}if(s.length&&this.options.diffcap<Math.abs((t.childNodes||[]).length-(e.childNodes||[]).length))return[new P().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,j(t)).setValue(this.options._const.newValue,j(e)).setValue(this.options._const.route,s)];if(Object.prototype.hasOwnProperty.call(t,"data")&&t.data!==e.data)return t.nodeName==="#text"?[new P().setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)]:[new P().setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)];for(o=t.attributes?Object.keys(t.attributes).sort():[],a=e.attributes?Object.keys(e.attributes).sort():[],r=o.length,d=0;d<r;d++)n=o[d],(l=a.indexOf(n))===-1?u.push(new P().setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,n).setValue(this.options._const.value,t.attributes[n])):(a.splice(l,1),t.attributes[n]!==e.attributes[n]&&u.push(new P().setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,n).setValue(this.options._const.oldValue,t.attributes[n]).setValue(this.options._const.newValue,e.attributes[n])));for(r=a.length,d=0;d<r;d++)n=a[d],u.push(new P().setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,n).setValue(this.options._const.value,e.attributes[n]));return u},i.prototype.findInnerDiff=function(t,e,s){var n=t.childNodes?t.childNodes.slice():[],o=e.childNodes?e.childNodes.slice():[],a=Math.max(n.length,o.length),r=Math.abs(n.length-o.length),l=[],d=0;if(!this.options.maxChildCount||a<this.options.maxChildCount){var u=!!(t.subsets&&t.subsetsAge--),m=u?t.subsets:t.childNodes&&e.childNodes?Bt(t,e):[];if(m.length>0&&(l=this.attemptGroupRelocation(t,e,m,s,u)).length>0)return l}for(var f=0;f<a;f+=1){var h=n[f],p=o[f];r&&(h&&!p?h.nodeName==="#text"?(l.push(new P().setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,h.data)),d-=1):(l.push(new P().setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.element,j(h))),d-=1):p&&!h&&(p.nodeName==="#text"?l.push(new P().setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,p.data)):l.push(new P().setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.element,j(p))))),h&&p&&(!this.options.maxChildCount||a<this.options.maxChildCount?l=l.concat(this.findNextDiff(h,p,s.concat(d))):Dt(h,p)||(n.length>o.length?(h.nodeName==="#text"?l.push(new P().setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,h.data)):l.push(new P().setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,j(h)).setValue(this.options._const.route,s.concat(d))),n.splice(f,1),f-=1,d-=1,r-=1):n.length<o.length?(l=l.concat([new P().setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,j(p)).setValue(this.options._const.route,s.concat(d))]),n.splice(f,0,j(p)),r-=1):l=l.concat([new P().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,j(h)).setValue(this.options._const.newValue,j(p)).setValue(this.options._const.route,s.concat(d))]))),d+=1}return t.innerDone=!0,l},i.prototype.attemptGroupRelocation=function(t,e,s,n,o){for(var a,r,l,d,u,m=(function($,A,O){var M=$.childNodes?ht($.childNodes.length,!0):[],k=A.childNodes?ht(A.childNodes.length,!0):[],R=0;return O.forEach((function(w){for(var b=w.oldValue+w.length,g=w.newValue+w.length,_=w.oldValue;_<b;_+=1)M[_]=R;for(_=w.newValue;_<g;_+=1)k[_]=R;R+=1})),{gaps1:M,gaps2:k}})(t,e,s),f=m.gaps1,h=m.gaps2,p=t.childNodes.slice(),N=e.childNodes.slice(),D=Math.min(f.length,h.length),V=[],c=0,y=0;c<D;y+=1,c+=1)if(!o||f[c]!==!0&&h[c]!==!0){if(f[y]===!0)if((d=p[y]).nodeName==="#text")if(N[c].nodeName==="#text"){if(d.data!==N[c].data){for(var T=y;p.length>T+1&&p[T+1].nodeName==="#text";)if(T+=1,N[c].data===p[T].data){u=!0;break}u||V.push(new P().setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n.concat(y)).setValue(this.options._const.oldValue,d.data).setValue(this.options._const.newValue,N[c].data))}}else V.push(new P().setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(y)).setValue(this.options._const.value,d.data)),f.splice(y,1),p.splice(y,1),D=Math.min(f.length,h.length),y-=1,c-=1;else h[c]===!0?V.push(new P().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,j(d)).setValue(this.options._const.newValue,j(N[c])).setValue(this.options._const.route,n.concat(y))):(V.push(new P().setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(y)).setValue(this.options._const.element,j(d))),f.splice(y,1),p.splice(y,1),D=Math.min(f.length,h.length),y-=1,c-=1);else if(h[c]===!0)(d=N[c]).nodeName==="#text"?(V.push(new P().setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(y)).setValue(this.options._const.value,d.data)),f.splice(y,0,!0),p.splice(y,0,{nodeName:"#text",data:d.data}),D=Math.min(f.length,h.length)):(V.push(new P().setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(y)).setValue(this.options._const.element,j(d))),f.splice(y,0,!0),p.splice(y,0,j(d)),D=Math.min(f.length,h.length));else if(f[y]!==h[c]){if(V.length>0)return V;if(l=s[f[y]],(r=Math.min(l.newValue,p.length-l.length))!==l.oldValue){a=!1;for(var S=0;S<l.length;S+=1)Et(p[r+S],p[l.oldValue+S],{},!1,!0)||(a=!0);if(a)return[new P().setValue(this.options._const.action,this.options._const.relocateGroup).setValue(this.options._const.groupLength,l.length).setValue(this.options._const.from,l.oldValue).setValue(this.options._const.to,r).setValue(this.options._const.route,n)]}}}return V},i.prototype.findValueDiff=function(t,e,s){var n=[];return t.selected!==e.selected&&n.push(new P().setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,t.selected).setValue(this.options._const.newValue,e.selected).setValue(this.options._const.route,s)),(t.value||e.value)&&t.value!==e.value&&t.nodeName!=="OPTION"&&n.push(new P().setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,t.value||"").setValue(this.options._const.newValue,e.value||"").setValue(this.options._const.route,s)),t.checked!==e.checked&&n.push(new P().setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,t.checked).setValue(this.options._const.newValue,e.checked).setValue(this.options._const.route,s)),n},i})(),Zt={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff:function(i,t,e,s){i.data=s},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1,_const:!1,document:!(typeof window>"u"||!window.document)&&window.document,components:[]},Gt=(function(){function i(t){if(t===void 0&&(t={}),Object.entries(Zt).forEach((function(n){var o=n[0],a=n[1];Object.prototype.hasOwnProperty.call(t,o)||(t[o]=a)})),!t._const){var e=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","groupLength","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"],s={};t.compress?e.forEach((function(n,o){return s[n]=o})):e.forEach((function(n){return s[n]=n})),t._const=s}this.options=t}return i.prototype.apply=function(t,e){return(function(s,n,o){return n.every((function(a){return Q(s,a,o)}))})(t,e,this.options)},i.prototype.undo=function(t,e){return qt(t,e,this.options)},i.prototype.diff=function(t,e){return new Xt(t,e,this.options).init()},i})(),Mt=(i,t,e,{classes:s,format:n,hiddenHeader:o,sortable:a,scrollY:r,type:l},{noColumnWidths:d,unhideHeader:u})=>({nodeName:"TR",childNodes:i.map(((m,f)=>{let h=t[f]||{type:l,format:n,sortable:!0,searchable:!0};if(h.hidden)return;let p=m.attributes?{...m.attributes}:{};if(h.sortable&&a&&(!r.length||u)&&(h.filter?p["data-filterable"]="true":p["data-sortable"]="true"),h.headerClass&&(p.class=J(p.class,h.headerClass)),e.sort&&e.sort.column===f){let D=e.sort.dir==="asc"?s.ascending:s.descending;p.class=J(p.class,D),p["aria-sort"]=e.sort.dir==="asc"?"ascending":"descending"}else e.filters[f]&&(p.class=J(p.class,s.filterActive));if(e.widths[f]&&!d){let D=`width: ${e.widths[f]}%;`;p.style=J(p.style,D)}if(r.length&&!u){let D="padding-bottom: 0;padding-top: 0;border: 0;";p.style=J(p.style,D)}let N=m.type==="html"?m.data:[{nodeName:"#text",data:m.text??String(m.data)}];return{nodeName:"TH",attributes:p,childNodes:!o&&!r.length||u?h.sortable&&a?[{nodeName:"BUTTON",attributes:{class:h.filter?s.filter:s.sorter},childNodes:N}]:N:[{nodeName:"#text",data:""}]}})).filter((m=>m))}),kt=(i,t,e,s,n,o,{classes:a,hiddenHeader:r,header:l,footer:d,format:u,sortable:m,scrollY:f,type:h,rowRender:p,tabIndex:N},{noColumnWidths:D,unhideHeader:V,renderHeader:c},y,T)=>{let S={nodeName:"TABLE",attributes:{...i},childNodes:[{nodeName:"TBODY",childNodes:e.map((({row:$,index:A})=>{let O={nodeName:"TR",attributes:{...$.attributes,"data-index":String(A)},childNodes:$.cells.map(((M,k)=>{let R=s[k]||{type:h,format:u,sortable:!0,searchable:!0};if(R.hidden)return;let w={nodeName:"TD",attributes:M.attributes?{...M.attributes}:{},childNodes:R.type==="html"?M.data:[{nodeName:"#text",data:nt(M)}]};if(l||d||!n.widths[k]||D||(w.attributes.style=J(w.attributes.style,`width: ${n.widths[k]}%;`)),R.cellClass&&(w.attributes.class=J(w.attributes.class,R.cellClass)),R.render){let b=R.render(M.data,w,A,k);if(b){if(typeof b!="string")return b;{let g=st(`<td>${b}</td>`);g.childNodes.length===1&&["#text","#comment"].includes(g.childNodes[0].nodeName)?w.childNodes[0].data=b:w.childNodes=g.childNodes}}}return w})).filter((M=>M))};if(A===o&&(O.attributes.class=J(O.attributes.class,a.cursor)),p){let M=p($,O,A);if(M){if(typeof M!="string")return M;{let k=st(`<tr>${M}</tr>`);!k.childNodes||k.childNodes.length===1&&["#text","#comment"].includes(k.childNodes[0].nodeName)?O.childNodes[0].data=M:O.childNodes=k.childNodes}}}return O}))}]};if(S.attributes.class=J(S.attributes.class,a.table),l||d||c){let $=Mt(t,s,n,{classes:a,hiddenHeader:r,sortable:m,scrollY:f},{noColumnWidths:D,unhideHeader:V});if(l||c){let A={nodeName:"THEAD",childNodes:[$]};!f.length&&!r||V||(A.attributes={style:"height: 0px;"}),S.childNodes.unshift(A)}if(d){let A={nodeName:"TFOOT",childNodes:[l?structuredClone($):$]};!f.length&&!r||V||(A.attributes={style:"height: 0px;"}),S.childNodes.push(A)}}return y.forEach(($=>S.childNodes.push($))),T.forEach(($=>S.childNodes.push($))),N!==!1&&(S.attributes.tabindex=String(N)),S};function Rt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Kt={exports:{}},ot=Rt(Kt.exports=(function(){var i=1e3,t=6e4,e=36e5,s="millisecond",n="second",o="minute",a="hour",r="day",l="week",d="month",u="quarter",m="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,D={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var b=["th","st","nd","rd"],g=w%100;return"["+w+(b[(g-20)%10]||b[g]||b[0])+"]"}},V=function(w,b,g){var _=String(w);return!_||_.length>=b?w:""+Array(b+1-_.length).join(g)+w},c={s:V,z:function(w){var b=-w.utcOffset(),g=Math.abs(b),_=Math.floor(g/60),v=g%60;return(b<=0?"+":"-")+V(_,2,"0")+":"+V(v,2,"0")},m:function w(b,g){if(b.date()<g.date())return-w(g,b);var _=12*(g.year()-b.year())+(g.month()-b.month()),v=b.clone().add(_,d),x=g-v<0,E=b.clone().add(_+(x?-1:1),d);return+(-(_+(g-v)/(x?v-E:E-v))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:d,y:m,w:l,d:r,D:f,h:a,m:o,s:n,ms:s,Q:u}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},y="en",T={};T[y]=D;var S="$isDayjsObject",$=function(w){return w instanceof k||!(!w||!w[S])},A=function w(b,g,_){var v;if(!b)return y;if(typeof b=="string"){var x=b.toLowerCase();T[x]&&(v=x),g&&(T[x]=g,v=x);var E=b.split("-");if(!v&&E.length>1)return w(E[0])}else{var L=b.name;T[L]=b,v=L}return!_&&v&&(y=v),v||!_&&y},O=function(w,b){if($(w))return w.clone();var g=typeof b=="object"?b:{};return g.date=w,g.args=arguments,new k(g)},M=c;M.l=A,M.i=$,M.w=function(w,b){return O(w,{locale:b.$L,utc:b.$u,x:b.$x,$offset:b.$offset})};var k=(function(){function w(g){this.$L=A(g.locale,null,!0),this.parse(g),this.$x=this.$x||g.x||{},this[S]=!0}var b=w.prototype;return b.parse=function(g){this.$d=(function(_){var v=_.date,x=_.utc;if(v===null)return new Date(NaN);if(M.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var E=v.match(p);if(E){var L=E[2]-1||0,H=(E[7]||"0").substring(0,3);return x?new Date(Date.UTC(E[1],L,E[3]||1,E[4]||0,E[5]||0,E[6]||0,H)):new Date(E[1],L,E[3]||1,E[4]||0,E[5]||0,E[6]||0,H)}}return new Date(v)})(g),this.init()},b.init=function(){var g=this.$d;this.$y=g.getFullYear(),this.$M=g.getMonth(),this.$D=g.getDate(),this.$W=g.getDay(),this.$H=g.getHours(),this.$m=g.getMinutes(),this.$s=g.getSeconds(),this.$ms=g.getMilliseconds()},b.$utils=function(){return M},b.isValid=function(){return this.$d.toString()!==h},b.isSame=function(g,_){var v=O(g);return this.startOf(_)<=v&&v<=this.endOf(_)},b.isAfter=function(g,_){return O(g)<this.startOf(_)},b.isBefore=function(g,_){return this.endOf(_)<O(g)},b.$g=function(g,_,v){return M.u(g)?this[_]:this.set(v,g)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(g,_){var v=this,x=!!M.u(_)||_,E=M.p(g),L=function(U,q){var z=M.w(v.$u?Date.UTC(v.$y,q,U):new Date(v.$y,q,U),v);return x?z:z.endOf(r)},H=function(U,q){return M.w(v.toDate()[U].apply(v.toDate("s"),(x?[0,0,0,0]:[23,59,59,999]).slice(q)),v)},Y=this.$W,F=this.$M,B=this.$D,G="set"+(this.$u?"UTC":"");switch(E){case m:return x?L(1,0):L(31,11);case d:return x?L(1,F):L(0,F+1);case l:var W=this.$locale().weekStart||0,X=(Y<W?Y+7:Y)-W;return L(x?B-X:B+(6-X),F);case r:case f:return H(G+"Hours",0);case a:return H(G+"Minutes",1);case o:return H(G+"Seconds",2);case n:return H(G+"Milliseconds",3);default:return this.clone()}},b.endOf=function(g){return this.startOf(g,!1)},b.$set=function(g,_){var v,x=M.p(g),E="set"+(this.$u?"UTC":""),L=(v={},v[r]=E+"Date",v[f]=E+"Date",v[d]=E+"Month",v[m]=E+"FullYear",v[a]=E+"Hours",v[o]=E+"Minutes",v[n]=E+"Seconds",v[s]=E+"Milliseconds",v)[x],H=x===r?this.$D+(_-this.$W):_;if(x===d||x===m){var Y=this.clone().set(f,1);Y.$d[L](H),Y.init(),this.$d=Y.set(f,Math.min(this.$D,Y.daysInMonth())).$d}else L&&this.$d[L](H);return this.init(),this},b.set=function(g,_){return this.clone().$set(g,_)},b.get=function(g){return this[M.p(g)]()},b.add=function(g,_){var v,x=this;g=Number(g);var E=M.p(_),L=function(F){var B=O(x);return M.w(B.date(B.date()+Math.round(F*g)),x)};if(E===d)return this.set(d,this.$M+g);if(E===m)return this.set(m,this.$y+g);if(E===r)return L(1);if(E===l)return L(7);var H=(v={},v[o]=t,v[a]=e,v[n]=i,v)[E]||1,Y=this.$d.getTime()+g*H;return M.w(Y,this)},b.subtract=function(g,_){return this.add(-1*g,_)},b.format=function(g){var _=this,v=this.$locale();if(!this.isValid())return v.invalidDate||h;var x=g||"YYYY-MM-DDTHH:mm:ssZ",E=M.z(this),L=this.$H,H=this.$m,Y=this.$M,F=v.weekdays,B=v.months,G=v.meridiem,W=function(q,z,Z,K){return q&&(q[z]||q(_,x))||Z[z].slice(0,K)},X=function(q){return M.s(L%12||12,q,"0")},U=G||function(q,z,Z){var K=q<12?"AM":"PM";return Z?K.toLowerCase():K};return x.replace(N,(function(q,z){return z||(function(Z){switch(Z){case"YY":return String(_.$y).slice(-2);case"YYYY":return M.s(_.$y,4,"0");case"M":return Y+1;case"MM":return M.s(Y+1,2,"0");case"MMM":return W(v.monthsShort,Y,B,3);case"MMMM":return W(B,Y);case"D":return _.$D;case"DD":return M.s(_.$D,2,"0");case"d":return String(_.$W);case"dd":return W(v.weekdaysMin,_.$W,F,2);case"ddd":return W(v.weekdaysShort,_.$W,F,3);case"dddd":return F[_.$W];case"H":return String(L);case"HH":return M.s(L,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return U(L,H,!0);case"A":return U(L,H,!1);case"m":return String(H);case"mm":return M.s(H,2,"0");case"s":return String(_.$s);case"ss":return M.s(_.$s,2,"0");case"SSS":return M.s(_.$ms,3,"0");case"Z":return E}return null})(q)||E.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(g,_,v){var x,E=this,L=M.p(_),H=O(g),Y=(H.utcOffset()-this.utcOffset())*t,F=this-H,B=function(){return M.m(E,H)};switch(L){case m:x=B()/12;break;case d:x=B();break;case u:x=B()/3;break;case l:x=(F-Y)/6048e5;break;case r:x=(F-Y)/864e5;break;case a:x=F/e;break;case o:x=F/t;break;case n:x=F/i;break;default:x=F}return v?x:M.a(x)},b.daysInMonth=function(){return this.endOf(d).$D},b.$locale=function(){return T[this.$L]},b.locale=function(g,_){if(!g)return this.$L;var v=this.clone(),x=A(g,_,!0);return x&&(v.$L=x),v},b.clone=function(){return M.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},w})(),R=k.prototype;return O.prototype=R,[["$ms",s],["$s",n],["$m",o],["$H",a],["$W",r],["$M",d],["$y",m],["$D",f]].forEach((function(w){R[w[1]]=function(b){return this.$g(b,w[0],w[1])}})),O.extend=function(w,b){return w.$i||(w(b,k,O),w.$i=!0),O},O.locale=A,O.isDayjs=$,O.unix=function(w){return O(1e3*w)},O.en=T[y],O.Ls=T,O.p={},O})()),te={exports:{}},ee=Rt(te.exports=(function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,e=/\d\d/,s=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},a=function(h){return(h=+h)+(h>68?1900:2e3)},r=function(h){return function(p){this[h]=+p}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(h){(this.zone||(this.zone={})).offset=(function(p){if(!p||p==="Z")return 0;var N=p.match(/([+-]|\d\d)/g),D=60*N[1]+(+N[2]||0);return D===0?0:N[0]==="+"?-D:D})(h)}],d=function(h){var p=o[h];return p&&(p.indexOf?p:p.s.concat(p.f))},u=function(h,p){var N,D=o.meridiem;if(D){for(var V=1;V<=24;V+=1)if(h.indexOf(D(V,0,p))>-1){N=V>12;break}}else N=h===(p?"pm":"PM");return N},m={A:[n,function(h){this.afternoon=u(h,!1)}],a:[n,function(h){this.afternoon=u(h,!0)}],S:[/\d/,function(h){this.milliseconds=100*+h}],SS:[e,function(h){this.milliseconds=10*+h}],SSS:[/\d{3}/,function(h){this.milliseconds=+h}],s:[s,r("seconds")],ss:[s,r("seconds")],m:[s,r("minutes")],mm:[s,r("minutes")],H:[s,r("hours")],h:[s,r("hours")],HH:[s,r("hours")],hh:[s,r("hours")],D:[s,r("day")],DD:[e,r("day")],Do:[n,function(h){var p=o.ordinal,N=h.match(/\d+/);if(this.day=N[0],p)for(var D=1;D<=31;D+=1)p(D).replace(/\[|\]/g,"")===h&&(this.day=D)}],M:[s,r("month")],MM:[e,r("month")],MMM:[n,function(h){var p=d("months"),N=(d("monthsShort")||p.map((function(D){return D.slice(0,3)}))).indexOf(h)+1;if(N<1)throw new Error;this.month=N%12||N}],MMMM:[n,function(h){var p=d("months").indexOf(h)+1;if(p<1)throw new Error;this.month=p%12||p}],Y:[/[+-]?\d+/,r("year")],YY:[e,function(h){this.year=a(h)}],YYYY:[/\d{4}/,r("year")],Z:l,ZZ:l};function f(h){var p,N;p=h,N=o&&o.formats;for(var D=(h=p.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(A,O,M){var k=M&&M.toUpperCase();return O||N[M]||i[M]||N[k].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(R,w,b){return w||b.slice(1)}))}))).match(t),V=D.length,c=0;c<V;c+=1){var y=D[c],T=m[y],S=T&&T[0],$=T&&T[1];D[c]=$?{regex:S,parser:$}:y.replace(/^\[|\]$/g,"")}return function(A){for(var O={},M=0,k=0;M<V;M+=1){var R=D[M];if(typeof R=="string")k+=R.length;else{var w=R.regex,b=R.parser,g=A.slice(k),_=w.exec(g)[0];b.call(O,_),A=A.replace(_,"")}}return(function(v){var x=v.afternoon;if(x!==void 0){var E=v.hours;x?E<12&&(v.hours+=12):E===12&&(v.hours=0),delete v.afternoon}})(O),O}}return function(h,p,N){N.p.customParseFormat=!0,h&&h.parseTwoDigitYear&&(a=h.parseTwoDigitYear);var D=p.prototype,V=D.parse;D.parse=function(c){var y=c.date,T=c.utc,S=c.args;this.$u=T;var $=S[1];if(typeof $=="string"){var A=S[2]===!0,O=S[3]===!0,M=A||O,k=S[2];O&&(k=S[2]),o=this.$locale(),!A&&k&&(o=N.Ls[k]),this.$d=(function(g,_,v){try{if(["x","X"].indexOf(_)>-1)return new Date((_==="X"?1e3:1)*g);var x=f(_)(g),E=x.year,L=x.month,H=x.day,Y=x.hours,F=x.minutes,B=x.seconds,G=x.milliseconds,W=x.zone,X=new Date,U=H||(E||L?1:X.getDate()),q=E||X.getFullYear(),z=0;E&&!L||(z=L>0?L-1:X.getMonth());var Z=Y||0,K=F||0,pt=B||0,ft=G||0;return W?new Date(Date.UTC(q,z,U,Z,K,pt,ft+60*W.offset*1e3)):v?new Date(Date.UTC(q,z,U,Z,K,pt,ft)):new Date(q,z,U,Z,K,pt,ft)}catch{return new Date("")}})(y,$,T),this.init(),k&&k!==!0&&(this.$L=this.locale(k).$L),M&&y!=this.format($)&&(this.$d=new Date("")),o={}}else if($ instanceof Array)for(var R=$.length,w=1;w<=R;w+=1){S[1]=$[w-1];var b=N.apply(this,S);if(b.isValid()){this.$d=b.$d,this.$L=b.$L,this.init();break}w===R&&(this.$d=new Date(""))}else V.call(this,c)}}})());ot.extend(ee);var Ht=(i,t)=>{let e;if(t)switch(t){case"ISO_8601":e=i;break;case"RFC_2822":e=ot(i.slice(5),"DD MMM YYYY HH:mm:ss ZZ").unix();break;case"MYSQL":e=ot(i,"YYYY-MM-DD hh:mm:ss").unix();break;case"UNIX":e=ot(i).unix();break;default:e=ot(i,t,!0).valueOf()}return e},it=(i,t)=>{if(i?.constructor===Object&&Object.prototype.hasOwnProperty.call(i,"data")&&!Object.keys(i).find((s=>!["text","order","data","attributes"].includes(s))))return i;let e={data:i};switch(t.type){case"string":typeof i!="string"&&(e.text=String(e.data),e.order=e.text);break;case"date":t.format&&(e.order=Ht(String(e.data),t.format));break;case"number":e.text=String(e.data),e.data=parseFloat(e.data),e.order=e.data;break;case"html":{let s=Array.isArray(e.data)?{nodeName:"TD",childNodes:e.data}:st(`<td>${String(e.data)}</td>`);e.data=s.childNodes||[];let n=lt(s);e.text=n,e.order=n;break}case"boolean":typeof e.data=="string"&&(e.data=e.data.toLowerCase().trim()),e.data=!["false",!1,null,void 0,0].includes(e.data),e.order=e.data?1:0,e.text=String(e.data);break;case"other":e.text="",e.order=0;break;default:e.text=JSON.stringify(e.data)}return e},rt=i=>{if(i instanceof Object&&i.constructor===Object&&i.hasOwnProperty("data")&&(typeof i.text=="string"||typeof i.data=="string"))return i;let t={data:i};if(typeof i=="string"){if(i.length){let e=st(`<th>${i}</th>`);if(e.childNodes&&(e.childNodes.length!==1||e.childNodes[0].nodeName!=="#text")){t.data=e.childNodes,t.type="html";let s=lt(e);t.text=s}}}else[null,void 0].includes(i)?t.text="":t.text=JSON.stringify(i);return t},Lt=(i,t=void 0,e,s,n)=>{let o={data:[],headings:[]};if(i.headings)o.headings=i.headings.map((a=>rt(a)));else if(t?.tHead)o.headings=Array.from(t.tHead.querySelectorAll("th")).map(((a,r)=>{let l=(u=>{let m=et(u,{valueDiffing:!1}),f;return f=!m.childNodes||m.childNodes.length===1&&m.childNodes[0].nodeName==="#text"?{data:u.innerText,type:"string"}:{data:m.childNodes,type:"html",text:lt(m)},f.attributes=m.attributes,f})(a);e[r]||(e[r]={type:s,format:n,searchable:!0,sortable:!0});let d=e[r];return a.dataset.sortable?.trim().toLowerCase()!=="false"&&a.dataset.sort?.trim().toLowerCase()!=="false"||(d.sortable=!1),a.dataset.searchable?.trim().toLowerCase()==="false"&&(d.searchable=!1),a.dataset.hidden?.trim().toLowerCase()!=="true"&&a.getAttribute("hidden")?.trim().toLowerCase()!=="true"||(d.hidden=!0),["number","string","html","date","boolean","other"].includes(a.dataset.type)&&(d.type=a.dataset.type,d.type==="date"&&a.dataset.format&&(d.format=a.dataset.format)),l}));else if(i.data?.length){let a=i.data[0],r=Array.isArray(a)?a:a.cells;o.headings=r.map((l=>rt("")))}else t?.tBodies.length&&(o.headings=Array.from(t.tBodies[0].rows[0].cells).map((a=>rt(""))));for(let a=0;a<o.headings.length;a++)e[a]||(e[a]={type:s,format:n,sortable:!0,searchable:!0});if(i.data){let a=o.headings.map((r=>r.data?String(r.data):r.text));o.data=i.data.map((r=>{let l,d;return Array.isArray(r)?(l={},d=r):r.hasOwnProperty("cells")&&Object.keys(r).every((u=>["cells","attributes"].includes(u)))?(l=r.attributes,d=r.cells):(l={},d=[],Object.entries(r).forEach((([u,m])=>{let f=a.indexOf(u);f>-1&&(d[f]=m)}))),{attributes:l,cells:d.map(((u,m)=>it(u,e[m])))}}))}else t?.tBodies?.length&&(o.data=Array.from(t.tBodies[0].rows).map((a=>({attributes:$t(a.attributes),cells:Array.from(a.cells).map(((r,l)=>{let d=r.dataset.content?it(r.dataset.content,e[l]):((u,m)=>{let f;switch(m.type){case"string":f={data:u.innerText};break;case"date":{let h=u.innerText;f={data:h,order:Ht(h,m.format)};break}case"number":{let h=parseFloat(u.innerText);f={data:h,order:h,text:u.innerText};break}case"boolean":{let h=!["false","0","null","undefined"].includes(u.innerText.toLowerCase().trim());f={data:h,text:h?"1":"0",order:h?1:0};break}default:f={data:et(u,{valueDiffing:!1}).childNodes||[],text:u.innerText,order:u.innerText}}return f.attributes=$t(u.attributes),f})(r,e[l]);return r.dataset.order&&(d.order=isNaN(parseFloat(r.dataset.order))?r.dataset.order:parseFloat(r.dataset.order)),d}))}))));if(o.data.length&&o.data[0].cells.length!==o.headings.length)throw new Error("Data heading length mismatch.");return o},xt=class{constructor(t){C(this,"cursor");C(this,"dt");this.dt=t,this.cursor=!1}setCursor(t=!1){if(t===this.cursor)return;let e=this.cursor;if(this.cursor=t,this.dt._renderTable(),t!==!1&&this.dt.options.scrollY){let s=tt(this.dt.options.classes.cursor),n=this.dt.dom.querySelector(`tr${s}`);n&&n.scrollIntoView({block:"nearest"})}this.dt.emit("datatable.cursormove",this.cursor,e)}add(t){if(!Array.isArray(t)||t.length<1)return;let e={cells:t.map(((s,n)=>{let o=this.dt.columns.settings[n];return it(s,o)}))};this.dt.data.data.push(e),this.dt.hasRows=!0,this.dt.update(!0)}remove(t){if(!Array.isArray(t))return this.remove([t]);this.dt.data.data=this.dt.data.data.filter(((e,s)=>!t.includes(s))),this.dt.data.data.length||(this.dt.hasRows=!1),this.dt.update(!0)}findRowIndex(t,e){return this.dt.data.data.findIndex((s=>{let n=s.cells[t];return nt(n).toLowerCase().includes(String(e).toLowerCase())}))}findRow(t,e){let s=this.findRowIndex(t,e);if(s<0)return{index:-1,row:null,cols:[]};let n=this.dt.data.data[s],o=n.cells.map((a=>a.data));return{index:s,row:n,cols:o}}updateRow(t,e){let s={cells:e.map(((n,o)=>{let a=this.dt.columns.settings[o];return it(n,a)}))};this.dt.data.data.splice(t,1,s),this.dt.update(!0)}},Ot=class{constructor(t){C(this,"dt");C(this,"settings");C(this,"_state");this.dt=t,this.init()}init(){[this.settings,this._state]=((t=[],e,s)=>{let n=[],o=!1,a=[];return t.forEach((r=>{(Array.isArray(r.select)?r.select:[r.select]).forEach((l=>{n[l]?r.type&&(n[l].type=r.type):n[l]={type:r.type||e,sortable:!0,searchable:!0};let d=n[l];r.render&&(d.render=r.render),r.format?d.format=r.format:r.type==="date"&&(d.format=s),r.cellClass&&(d.cellClass=r.cellClass),r.headerClass&&(d.headerClass=r.headerClass),r.locale&&(d.locale=r.locale),r.sortable===!1?d.sortable=!1:(r.numeric&&(d.numeric=r.numeric),r.caseFirst&&(d.caseFirst=r.caseFirst)),r.searchable===!1?d.searchable=!1:r.sensitivity&&(d.sensitivity=r.sensitivity),(d.searchable||d.sortable)&&r.ignorePunctuation!==void 0&&(d.ignorePunctuation=r.ignorePunctuation),r.searchMethod&&(d.searchMethod=r.searchMethod),r.hidden&&(d.hidden=!0),r.filter&&(d.filter=r.filter),r.sortSequence&&(d.sortSequence=r.sortSequence),r.sort&&(r.filter?a[l]=r.sort:o={column:l,dir:r.sort}),r.searchItemSeparator!==void 0&&(d.searchItemSeparator=r.searchItemSeparator)}))})),n=n.map((r=>r||{type:e,format:e==="date"?s:void 0,sortable:!0,searchable:!0})),[n,{filters:a,sort:o,widths:[]}]})(this.dt.options.columns,this.dt.options.type,this.dt.options.format)}get(t){return t<0||t>=this.size()?null:{...this.settings[t]}}size(){return this.settings.length}swap(t){if(t.length===2){let e=this.dt.data.headings.map(((a,r)=>r)),s=t[0],n=t[1],o=e[n];return e[n]=e[s],e[s]=o,this.order(e)}}order(t){this.dt.data.headings=t.map((e=>this.dt.data.headings[e])),this.dt.data.data.forEach((e=>e.cells=t.map((s=>e.cells[s])))),this.settings=t.map((e=>this.settings[e])),this.dt.update()}hide(t){Array.isArray(t)||(t=[t]),t.length&&(t.forEach((e=>{this.settings[e]||(this.settings[e]={type:"string"}),this.settings[e].hidden=!0})),this.dt.update())}show(t){Array.isArray(t)||(t=[t]),t.length&&(t.forEach((e=>{this.settings[e]||(this.settings[e]={type:"string",sortable:!0}),delete this.settings[e].hidden})),this.dt.update())}visible(t){return t===void 0&&(t=[...Array(this.dt.data.headings.length).keys()]),Array.isArray(t)?t.map((e=>!this.settings[e]?.hidden)):!this.settings[t]?.hidden}add(t){let e=this.dt.data.headings.length;if(this.dt.data.headings=this.dt.data.headings.concat([rt(t.heading)]),this.dt.data.data.forEach(((s,n)=>{s.cells=s.cells.concat([it(t.data[n],t)])})),this.settings[e]={type:t.type||"string",sortable:!0,searchable:!0},t.type||t.format||t.sortable||t.render||t.filter){let s=this.settings[e];t.render&&(s.render=t.render),t.format&&(s.format=t.format),t.cellClass&&(s.cellClass=t.cellClass),t.headerClass&&(s.headerClass=t.headerClass),t.locale&&(s.locale=t.locale),t.sortable===!1?s.sortable=!1:(t.numeric&&(s.numeric=t.numeric),t.caseFirst&&(s.caseFirst=t.caseFirst)),t.searchable===!1?s.searchable=!1:t.sensitivity&&(s.sensitivity=t.sensitivity),(s.searchable||s.sortable)&&t.ignorePunctuation&&(s.ignorePunctuation=t.ignorePunctuation),t.hidden&&(s.hidden=!0),t.filter&&(s.filter=t.filter),t.sortSequence&&(s.sortSequence=t.sortSequence)}this.dt.update(!0)}remove(t){Array.isArray(t)||(t=[t]),this.dt.data.headings=this.dt.data.headings.filter(((e,s)=>!t.includes(s))),this.dt.data.data.forEach((e=>e.cells=e.cells.filter(((s,n)=>!t.includes(n))))),this.dt.update(!0)}filter(t,e=!1){if(!this.settings[t]?.filter?.length)return;let s=this._state.filters[t],n;if(s){let o=!1;n=this.settings[t].filter.find((a=>!!o||(a===s&&(o=!0),!1)))}else{let o=this.settings[t].filter;n=o?o[0]:void 0}n?this._state.filters[t]=n:s&&(this._state.filters[t]=void 0),this.dt._currentPage=1,this.dt.update(),e||this.dt.emit("datatable.filter",t,n)}sort(t,e=void 0,s=!1){let n=this.settings[t];if(s||this.dt.emit("datatable.sorting",t,e),!e){let a=!(!this._state.sort||this._state.sort.column!==t)&&this._state.sort?.dir,r=n?.sortSequence||["asc","desc"];if(a){let l=r.indexOf(a);e=l===-1?r[0]||"asc":l===r.length-1?r[0]:r[l+1]}else e=r.length?r[0]:"asc"}let o=!!["string","html"].includes(n.type)&&new Intl.Collator(n.locale||this.dt.options.locale,{usage:"sort",numeric:n.numeric||this.dt.options.numeric,caseFirst:n.caseFirst||this.dt.options.caseFirst,ignorePunctuation:n.ignorePunctuation||this.dt.options.ignorePunctuation});this.dt.data.data.sort(((a,r)=>{let l=a.cells[t],d=r.cells[t],u=l.order??nt(l),m=d.order??nt(d);if(e==="desc"){let f=u;u=m,m=f}return o&&typeof u!="number"&&typeof m!="number"?o.compare(String(u),String(m)):u<m?-1:u>m?1:0})),this._state.sort={column:t,dir:e},this.dt._searchQueries.length?(this.dt.multiSearch(this.dt._searchQueries),this.dt.emit("datatable.sort",t,e)):s||(this.dt._currentPage=1,this.dt.update(),this.dt.emit("datatable.sort",t,e))}_measureWidths(){let t=this.dt.data.headings.filter(((e,s)=>!this.settings[s]?.hidden));if((this.dt.options.scrollY.length||this.dt.options.fixedColumns)&&t?.length){this._state.widths=[];let e={noPaging:!0};if(this.dt.options.header||this.dt.options.footer){this.dt.options.scrollY.length&&(e.unhideHeader=!0),this.dt.headerDOM&&this.dt.headerDOM.parentElement.removeChild(this.dt.headerDOM),e.noColumnWidths=!0,this.dt._renderTable(e);let s=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]),n=0,o=this.dt.data.headings.map(((r,l)=>{if(this.settings[l]?.hidden)return 0;let d=s[n].offsetWidth;return n+=1,d})),a=o.reduce(((r,l)=>r+l),0);this._state.widths=o.map((r=>r/a*100))}else{e.renderHeader=!0,this.dt._renderTable(e);let s=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]),n=0,o=this.dt.data.headings.map(((r,l)=>{if(this.settings[l]?.hidden)return 0;let d=s[n].offsetWidth;return n+=1,d})),a=o.reduce(((r,l)=>r+l),0);this._state.widths=o.map((r=>r/a*100))}this.dt._renderTable()}}},dt={sortable:!0,locale:"en",numeric:!0,caseFirst:"false",searchable:!0,sensitivity:"base",ignorePunctuation:!0,destroyable:!0,searchItemSeparator:"",searchQuerySeparator:" ",searchAnd:!1,searchMethod:!1,data:{},type:"html",format:"YYYY-MM-DD",columns:[],paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"\u2039",nextText:"\u203A",firstText:"\xAB",lastText:"\xBB",ellipsisText:"\u2026",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,footer:!1,header:!0,hiddenHeader:!1,caption:void 0,rowNavigation:!1,rowSelectionKeys:["Enter"," "],tabIndex:!1,pagerRender:!1,rowRender:!1,tableRender:!1,diffDomOptions:{valueDiffing:!1},labels:{placeholder:"Search...",searchTitle:"Search within table",perPage:"entries per page",pageTitle:"Page {page}",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},template:(i,t)=>`<div class='${i.classes.top}'>
    ${i.paging&&i.perPageSelect?`<div class='${i.classes.dropdown}'>
            <label>
                <select class='${i.classes.selector}' name="per-page"></select> ${i.labels.perPage}
            </label>
        </div>`:""}
    ${i.searchable?`<div class='${i.classes.search}'>
            <input class='${i.classes.input}' placeholder='${i.labels.placeholder}' type='search' name="search" title='${i.labels.searchTitle}'${t.id?` aria-controls="${t.id}"`:""}>
        </div>`:""}
</div>
<div class='${i.classes.container}'${i.scrollY.length?` style='height: ${i.scrollY}; overflow-Y: auto;'`:""}></div>
<div class='${i.classes.bottom}'>
    ${i.paging?`<div class='${i.classes.info}'></div>`:""}
    <nav class='${i.classes.pagination}'></nav>
</div>`,classes:{active:"datatable-active",ascending:"datatable-ascending",bottom:"datatable-bottom",container:"datatable-container",cursor:"datatable-cursor",descending:"datatable-descending",disabled:"datatable-disabled",dropdown:"datatable-dropdown",ellipsis:"datatable-ellipsis",filter:"datatable-filter",filterActive:"datatable-filter-active",empty:"datatable-empty",headercontainer:"datatable-headercontainer",hidden:"datatable-hidden",info:"datatable-info",input:"datatable-input",loading:"datatable-loading",pagination:"datatable-pagination",paginationList:"datatable-pagination-list",paginationListItem:"datatable-pagination-list-item",paginationListItemLink:"datatable-pagination-list-item-link",search:"datatable-search",selector:"datatable-selector",sorter:"datatable-sorter",table:"datatable-table",top:"datatable-top",wrapper:"datatable-wrapper"}},at=(i,t,e,s={})=>({nodeName:"LI",attributes:{class:s.active&&!s.hidden?`${e.classes.paginationListItem} ${e.classes.active}`:s.hidden?`${e.classes.paginationListItem} ${e.classes.hidden} ${e.classes.disabled}`:e.classes.paginationListItem},childNodes:[{nodeName:"BUTTON",attributes:{"data-page":String(i),class:e.classes.paginationListItemLink,"aria-label":e.labels.pageTitle.replace("{page}",String(i))},childNodes:[{nodeName:"#text",data:t}]}]}),se=(i,t,e,s,n)=>{let o=[];if(n.firstLast&&o.push(at(1,n.firstText,n)),n.nextPrev){let r=i?1:e-1;o.push(at(r,n.prevText,n,{hidden:i}))}let a=[...Array(s).keys()].map((r=>at(r+1,String(r+1),n,{active:r===e-1})));if(n.truncatePager&&(a=((r,l,d,u)=>{let m=u.pagerDelta,f=u.classes,h=u.ellipsisText,p=2*m,N=l-m,D=l+m;l<4-m+p?D=3+p:l>d-(3-m+p)&&(N=d-(2+p));let V=[];for(let T=1;T<=d;T++)if(T==1||T==d||T>=N&&T<=D){let S=r[T-1];V.push(S)}let c,y=[];return V.forEach((T=>{let S=parseInt(T.childNodes[0].attributes["data-page"],10);if(c){let $=parseInt(c.childNodes[0].attributes["data-page"],10);if(S-$==2)y.push(r[$]);else if(S-$!=1){let A={nodeName:"LI",attributes:{class:`${f.paginationListItem} ${f.ellipsis} ${f.disabled}`},childNodes:[{nodeName:"BUTTON",attributes:{class:f.paginationListItemLink},childNodes:[{nodeName:"#text",data:h}]}]};y.push(A)}}y.push(T),c=T})),y})(a,e,s,n)),o=o.concat(a),n.nextPrev){let r=t?s:e+1;o.push(at(r,n.nextText,n,{hidden:t}))}return n.firstLast&&o.push(at(s,n.lastText,n)),{nodeName:"UL",attributes:{class:n.classes.paginationList},childNodes:a.length>1?o:[]}},ut=class{constructor(t,e={}){C(this,"columns");C(this,"containerDOM");C(this,"_currentPage");C(this,"data");C(this,"_dd");C(this,"dom");C(this,"_events");C(this,"hasHeadings");C(this,"hasRows");C(this,"headerDOM");C(this,"_initialHTML");C(this,"initialized");C(this,"_label");C(this,"lastPage");C(this,"_listeners");C(this,"onFirstPage");C(this,"onLastPage");C(this,"options");C(this,"_pagerDOMs");C(this,"_virtualPagerDOM");C(this,"pages");C(this,"_rect");C(this,"rows");C(this,"_searchData");C(this,"_searchQueries");C(this,"_tableAttributes");C(this,"_tableFooters");C(this,"_tableCaptions");C(this,"totalPages");C(this,"_virtualDOM");C(this,"_virtualHeaderDOM");C(this,"wrapperDOM");C(this,"_onResize",Ft((()=>{this._rect=this.containerDOM.getBoundingClientRect(),this._rect.width&&this.update(!0)}),250));let s=typeof t=="string"?document.querySelector(t):t;s instanceof HTMLTableElement?this.dom=s:(this.dom=document.createElement("table"),s.appendChild(this.dom));let n={...dt.diffDomOptions,...e.diffDomOptions},o={...dt.labels,...e.labels},a={...dt.classes,...e.classes};this.options={...dt,...e,diffDomOptions:n,labels:o,classes:a},this._initialHTML=this.options.destroyable?s.outerHTML:"",this.options.tabIndex?this.dom.tabIndex=this.options.tabIndex:this.options.rowNavigation&&this.dom.tabIndex===-1&&(this.dom.tabIndex=0),this._listeners={onResize:()=>this._onResize()},this._dd=new Gt(this.options.diffDomOptions||{}),this.initialized=!1,this._events={},this._currentPage=0,this.onFirstPage=!0,this.hasHeadings=!1,this.hasRows=!1,this._searchQueries=[],this.init()}init(){if(this.initialized||gt(this.dom,this.options.classes.table))return!1;this._virtualDOM=et(this.dom,this.options.diffDomOptions||{}),this._tableAttributes={...this._virtualDOM.attributes},this._tableFooters=this._virtualDOM.childNodes?.filter((t=>t.nodeName==="TFOOT"))??[],this._tableCaptions=this._virtualDOM.childNodes?.filter((t=>t.nodeName==="CAPTION"))??[],this.options.caption!==void 0&&this._tableCaptions.push({nodeName:"CAPTION",childNodes:[{nodeName:"#text",data:this.options.caption}]}),this.rows=new xt(this),this.columns=new Ot(this),this.data=Lt(this.options.data,this.dom,this.columns.settings,this.options.type,this.options.format),this._render(),setTimeout((()=>{this.emit("datatable.init"),this.initialized=!0}),10)}_render(){this.wrapperDOM=mt("div",{class:`${this.options.classes.wrapper} ${this.options.classes.loading}`}),this.wrapperDOM.innerHTML=this.options.template(this.options,this.dom);let t=tt(this.options.classes.selector),e=this.wrapperDOM.querySelector(`select${t}`);e&&this.options.paging&&this.options.perPageSelect?this.options.perPageSelect.forEach((a=>{let[r,l]=Array.isArray(a)?[a[0],a[1]]:[String(a),a],d=l===this.options.perPage,u=new Option(r,String(l),d,d);e.appendChild(u)})):e&&e.parentElement.removeChild(e);let s=tt(this.options.classes.container);this.containerDOM=this.wrapperDOM.querySelector(s),this._pagerDOMs=[];let n=tt(this.options.classes.pagination);Array.from(this.wrapperDOM.querySelectorAll(n)).forEach((a=>{a instanceof HTMLElement&&(a.innerHTML=`<ul class="${this.options.classes.paginationList}"></ul>`,this._pagerDOMs.push(a.firstElementChild))})),this._virtualPagerDOM={nodeName:"UL",attributes:{class:this.options.classes.paginationList}};let o=tt(this.options.classes.info);this._label=this.wrapperDOM.querySelector(o),this.dom.parentElement.replaceChild(this.wrapperDOM,this.dom),this.containerDOM.appendChild(this.dom),this._rect=this.dom.getBoundingClientRect(),this._fixHeight(),this.options.header||this.wrapperDOM.classList.add("no-header"),this.options.footer||this.wrapperDOM.classList.add("no-footer"),this.options.sortable&&this.wrapperDOM.classList.add("sortable"),this.options.searchable&&this.wrapperDOM.classList.add("searchable"),this.options.fixedHeight&&this.wrapperDOM.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapperDOM.classList.add("fixed-columns"),this._bindEvents(),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}_renderTable(t={}){let e;e=(this.options.paging||this._searchQueries.length||this.columns._state.filters.length)&&this._currentPage&&this.pages.length&&!t.noPaging?this.pages[this._currentPage-1]:this.data.data.map(((o,a)=>({row:o,index:a})));let s=kt(this._tableAttributes,this.data.headings,e,this.columns.settings,this.columns._state,this.rows.cursor,this.options,t,this._tableFooters,this._tableCaptions);if(this.options.tableRender){let o=this.options.tableRender(this.data,s,"main");o&&(s=o)}let n=this._dd.diff(this._virtualDOM,s);this._dd.apply(this.dom,n),this._virtualDOM=s}_renderPage(t=!1){this.hasRows&&this.totalPages?(this._currentPage>this.totalPages&&(this._currentPage=1),this._renderTable(),this.onFirstPage=this._currentPage===1,this.onLastPage=this._currentPage===this.lastPage):this.setMessage(this.options.labels.noRows);let e,s=0,n=0,o=0;if(this.totalPages&&(s=this._currentPage-1,n=s*this.options.perPage,o=n+this.pages[s].length,n+=1,e=this._searchQueries.length?this._searchData.length:this.data.data.length),this._label&&this.options.labels.info.length){let a=this.options.labels.info.replace("{start}",String(n)).replace("{end}",String(o)).replace("{page}",String(this._currentPage)).replace("{pages}",String(this.totalPages)).replace("{rows}",String(e));this._label.innerHTML=e?a:""}if(this._currentPage==1&&this._fixHeight(),this.options.rowNavigation&&this._currentPage&&(!this.rows.cursor||!this.pages[this._currentPage-1].find((a=>a.index===this.rows.cursor)))){let a=this.pages[this._currentPage-1];a.length&&(t?this.rows.setCursor(a[a.length-1].index):this.rows.setCursor(a[0].index))}}_renderPagers(){if(!this.options.paging)return;let t=se(this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages,this.options);if(this.options.pagerRender){let s=this.options.pagerRender([this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages],t);s&&(t=s)}let e=this._dd.diff(this._virtualPagerDOM,t);this._pagerDOMs.forEach((s=>{this._dd.apply(s,e)})),this._virtualPagerDOM=t}_renderSeparateHeader(){let t=this.dom.parentElement;this.headerDOM||(this.headerDOM=document.createElement("div"),this._virtualHeaderDOM={nodeName:"DIV"}),t.parentElement.insertBefore(this.headerDOM,t);let e={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[Mt(this.data.headings,this.columns.settings,this.columns._state,this.options,{unhideHeader:!0})]}]};if(e.attributes.class=J(e.attributes.class,this.options.classes.table),this.options.tableRender){let a=this.options.tableRender(this.data,e,"header");a&&(e=a)}let s={nodeName:"DIV",attributes:{class:this.options.classes.headercontainer},childNodes:[e]},n=this._dd.diff(this._virtualHeaderDOM,s);this._dd.apply(this.headerDOM,n),this._virtualHeaderDOM=s;let o=this.headerDOM.firstElementChild.clientWidth-this.dom.clientWidth;if(o){let a=structuredClone(this._virtualHeaderDOM);a.attributes.style=`padding-right: ${o}px;`;let r=this._dd.diff(this._virtualHeaderDOM,a);this._dd.apply(this.headerDOM,r),this._virtualHeaderDOM=a}t.scrollHeight>t.clientHeight&&(t.style.overflowY="scroll")}_bindEvents(){if(this.options.perPageSelect){let t=tt(this.options.classes.selector),e=this.wrapperDOM.querySelector(t);e&&e instanceof HTMLSelectElement&&e.addEventListener("change",(()=>{this.emit("datatable.perpage:before",this.options.perPage),this.options.perPage=parseInt(e.value,10),this.update(),this._fixHeight(),this.emit("datatable.perpage",this.options.perPage)}),!1)}this.options.searchable&&this.wrapperDOM.addEventListener("input",(t=>{let e=tt(this.options.classes.input),s=t.target;if(!(s instanceof HTMLInputElement&&s.matches(e)))return;t.preventDefault();let n=[];if(Array.from(this.wrapperDOM.querySelectorAll(e)).filter((o=>o.value.length)).forEach((o=>{let a=o.dataset.and||this.options.searchAnd,r=o.dataset.querySeparator||this.options.searchQuerySeparator?o.value.split(this.options.searchQuerySeparator):[o.value];a?r.forEach((l=>{o.dataset.columns?n.push({terms:[l],columns:JSON.parse(o.dataset.columns)}):n.push({terms:[l],columns:void 0})})):o.dataset.columns?n.push({terms:r,columns:JSON.parse(o.dataset.columns)}):n.push({terms:r,columns:void 0})})),n.length===1&&n[0].terms.length===1){let o=n[0];this.search(o.terms[0],o.columns)}else this.multiSearch(n)})),this.wrapperDOM.addEventListener("click",(t=>{let e=t.target.closest("a, button");if(e){if(e.hasAttribute("data-page"))this.page(parseInt(e.getAttribute("data-page"),10)),t.preventDefault();else if(gt(e,this.options.classes.sorter)){let s=Array.from(e.parentElement.parentElement.children).indexOf(e.parentElement),n=Vt(s,this.columns.settings);this.columns.sort(n),t.preventDefault()}else if(gt(e,this.options.classes.filter)){let s=Array.from(e.parentElement.parentElement.children).indexOf(e.parentElement),n=Vt(s,this.columns.settings);this.columns.filter(n),t.preventDefault()}}}),!1),this.options.rowNavigation&&this.dom.addEventListener("keydown",(t=>{if(t.key==="ArrowUp"){let e;t.preventDefault(),t.stopPropagation(),this.pages[this._currentPage-1].find((s=>s.index===this.rows.cursor||(e=s,!1))),e?this.rows.setCursor(e.index):this.onFirstPage||this.page(this._currentPage-1,!0)}else if(t.key==="ArrowDown"){let e;t.preventDefault(),t.stopPropagation();let s=this.pages[this._currentPage-1].find((n=>!!e||(n.index===this.rows.cursor&&(e=!0),!1)));s?this.rows.setCursor(s.index):this.onLastPage||this.page(this._currentPage+1)}else this.options.rowSelectionKeys.includes(t.key)&&this.emit("datatable.selectrow",this.rows.cursor,t,!0)})),this.dom.addEventListener("mousedown",(t=>{let e=t.target;if(!(e instanceof Element))return;let s=Array.from(this.dom.querySelectorAll("tbody > tr")).find((n=>n.contains(e)));s&&s instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(s.dataset.index,10),t,this.dom.matches(":focus"))})),window.addEventListener("resize",this._listeners.onResize)}destroy(){if(this.options.destroyable){if(this.wrapperDOM){let t=this.wrapperDOM.parentElement;if(t){let e=mt("div");e.innerHTML=this._initialHTML;let s=e.firstElementChild;t.replaceChild(s,this.wrapperDOM),this.dom=s}else this.options.classes.table?.split(" ").forEach((e=>this.wrapperDOM.classList.remove(e)))}window.removeEventListener("resize",this._listeners.onResize),this.initialized=!1}}update(t=!1){this.emit("datatable.update:before"),t&&(this.columns._measureWidths(),this.hasRows=!!this.data.data.length,this.hasHeadings=!!this.data.headings.length),this.options.classes.empty?.split(" ").forEach((e=>this.wrapperDOM.classList.remove(e))),this._paginate(),this._renderPage(),this._renderPagers(),this.options.scrollY.length&&this._renderSeparateHeader(),this.emit("datatable.update")}_paginate(){let t=this.data.data.map(((e,s)=>({row:e,index:s})));return this._searchQueries.length&&(t=[],this._searchData.forEach((e=>t.push({index:e,row:this.data.data[e]})))),this.columns._state.filters.length&&this.columns._state.filters.forEach(((e,s)=>{e&&(t=t.filter((n=>{let o=n.row.cells[s];return typeof e=="function"?e(o.data):nt(o)===e})))})),this.options.paging&&this.options.perPage>0?this.pages=t.map(((e,s)=>s%this.options.perPage==0?t.slice(s,s+this.options.perPage):null)).filter((e=>e)):this.pages=[t],this.totalPages=this.lastPage=this.pages.length,this._currentPage||(this._currentPage=1),this.totalPages}_fixHeight(){this.options.fixedHeight&&(this.containerDOM.style.height=null,this._rect=this.containerDOM.getBoundingClientRect(),this.containerDOM.style.height=`${this._rect.height}px`)}search(t,e=void 0,s="search"){if(this.emit("datatable.search:before",t,this._searchData),!t.length)return this._currentPage=1,this._searchQueries=[],this._searchData=[],this.update(),this.emit("datatable.search","",[]),this.wrapperDOM.classList.remove("search-results"),!1;this.multiSearch([{terms:[t],columns:e||void 0}],s),this.emit("datatable.search",t,this._searchData)}multiSearch(t,e="search"){if(!this.hasRows)return!1;this._currentPage=1,this._searchData=[];let s=t.map((o=>({columns:o.columns,terms:o.terms.map((a=>a.trim())).filter((a=>a)),source:e}))).filter((o=>o.terms.length));if(this.emit("datatable.multisearch:before",s,this._searchData),e.length&&(s=s.concat(this._searchQueries.filter((o=>o.source!==e)))),this._searchQueries=s,!s.length)return this.update(),this.emit("datatable.multisearch",s,this._searchData),this.wrapperDOM.classList.remove("search-results"),!1;let n=s.map((o=>this.columns.settings.map(((a,r)=>{if(a.hidden||!a.searchable||o.columns&&!o.columns.includes(r))return!1;let l=o.terms,d=a.sensitivity||this.options.sensitivity;return["base","accent"].includes(d)&&(l=l.map((u=>u.toLowerCase()))),["base","case"].includes(d)&&(l=l.map((u=>u.normalize("NFD").replace(/\p{Diacritic}/gu,"")))),(a.ignorePunctuation??this.options.ignorePunctuation)&&(l=l.map((u=>u.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,"")))),l}))));this.data.data.forEach(((o,a)=>{let r=o.cells.map(((l,d)=>{let u=this.columns.settings[d];if(u.searchMethod||this.options.searchMethod)return l;let m=nt(l).trim();if(m.length){let h=u.sensitivity||this.options.sensitivity;["base","accent"].includes(h)&&(m=m.toLowerCase()),["base","case"].includes(h)&&(m=m.normalize("NFD").replace(/\p{Diacritic}/gu,"")),(u.ignorePunctuation??this.options.ignorePunctuation)&&(m=m.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,""))}let f=u.searchItemSeparator||this.options.searchItemSeparator;return f?m.split(f):[m]}));n.every(((l,d)=>l.find(((u,m)=>{if(!u)return!1;let f=this.columns.settings[m].searchMethod||this.options.searchMethod;return f?f(u,r[m],o,m,s[d].source):u.find((h=>r[m].find((p=>p.includes(h)))))}))))&&this._searchData.push(a)})),this.wrapperDOM.classList.add("search-results"),this._searchData.length?this.update():(this.wrapperDOM.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),this.emit("datatable.multisearch",s,this._searchData)}page(t,e=!1){return this.emit("datatable.page:before",t),t!==this._currentPage&&(isNaN(t)||(this._currentPage=t),!(t>this.pages.length||t<0)&&(this._renderPage(e),this._renderPagers(),void this.emit("datatable.page",t)))}insert(t){let e=[];if(Array.isArray(t)){let s=this.data.headings.map((n=>n.data?String(n.data):n.text));t.forEach(((n,o)=>{let a=[];Object.entries(n).forEach((([r,l])=>{let d=s.indexOf(r);d>-1?a[d]=it(l,this.columns.settings[d]):this.hasHeadings||this.hasRows||o!==0||(a[s.length]=it(l,this.columns.settings[s.length]),s.push(r),this.data.headings.push(rt(r)))})),e.push({cells:a})}))}else jt(t)&&(!t.headings||this.hasHeadings||this.hasRows?t.data&&Array.isArray(t.data)&&(e=t.data.map((s=>{let n,o;return Array.isArray(s)?(n={},o=s):(n=s.attributes,o=s.cells),{attributes:n,cells:o.map(((a,r)=>it(a,this.columns.settings[r])))}}))):this.data=Lt(t,void 0,this.columns.settings,this.options.type,this.options.format));e.length&&e.forEach((s=>this.data.data.push(s))),this.hasHeadings=!!this.data.headings.length,this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}refresh(){if(this.emit("datatable.refresh:before"),this.options.searchable){let t=tt(this.options.classes.input);Array.from(this.wrapperDOM.querySelectorAll(t)).forEach((e=>e.value="")),this._searchQueries=[]}this._currentPage=1,this.onFirstPage=!0,this.update(!0),this.emit("datatable.refresh")}print(){let t=mt("table"),e=kt(this._tableAttributes,this.data.headings,this.data.data.map(((o,a)=>({row:o,index:a}))),this.columns.settings,this.columns._state,!1,this.options,{noColumnWidths:!0,unhideHeader:!0},this._tableFooters,this._tableCaptions);if(this.options.tableRender){let o=this.options.tableRender(this.data,e,"print");o&&(e=o)}let s=this._dd.diff({nodeName:"TABLE"},e);this._dd.apply(t,s);let n=window.open();n.document.body.appendChild(t),n.print()}setMessage(t){let e=this.data.headings.filter(((o,a)=>!this.columns.settings[a]?.hidden)).length||1;this.options.classes.empty?.split(" ").forEach((o=>this.wrapperDOM.classList.add(o))),this._label&&(this._label.innerHTML=""),this.totalPages=0,this._renderPagers();let s={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[Mt(this.data.headings,this.columns.settings,this.columns._state,this.options,{})]},{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",attributes:{class:this.options.classes.empty,colspan:String(e)},childNodes:[{nodeName:"#text",data:t}]}]}]}]};if(this._tableFooters.forEach((o=>s.childNodes.push(o))),this._tableCaptions.forEach((o=>s.childNodes.push(o))),s.attributes.class=J(s.attributes.class,this.options.classes.table),this.options.tableRender){let o=this.options.tableRender(this.data,s,"message");o&&(s=o)}let n=this._dd.diff(this._virtualDOM,s);this._dd.apply(this.dom,n),this._virtualDOM=s}on(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)}off(t,e){t in this._events&&this._events[t].splice(this._events[t].indexOf(e),1)}emit(t,...e){if(t in this._events)for(let s=0;s<this._events[t].length;s++)this._events[t][s](...e)}};var ie=window.addEventListener;window.addEventListener=function(i,t,e){i!=="resize"&&ie.call(this,i,t,e)};new ut("#fonts",{columns:[{select:2,sort:"asc"}],labels:{noResults:"No s'ha trobat cap resultat"},locale:"ca",paging:!1,tableRender:(i,t,e)=>{if(e==="print")return t;let s=t.childNodes[0],n={childNodes:s.childNodes[0].childNodes.map((o,a)=>{let r=o.childNodes.find(d=>d.nodeName==="BUTTON");return{childNodes:[{attributes:{"aria-label":`Cerca a la columna ${r&&r.childNodes.length>0&&r.childNodes[0].nodeName==="#text"?r.childNodes[0].data:a+1}`,class:"datatable-input","data-and":!0,"data-columns":`[${a}]`,type:"search"},nodeName:"INPUT"}],nodeName:"TH"}}),nodeName:"TR"};return s.childNodes.push(n),t}});})();
